#@ load("@ytt:data", "data"); d=data.values
#@ load("@ytt:overlay", "overlay")
#@ load("crds.lib.yaml", "crd_names", "crd_named")

#@ for name in crd_names:
#@overlay/match by=overlay.subset(crd_named(name))
---
spec:
  #@overlay/match missing_ok=True
  conversion:
    strategy: Webhook
    webhook:
      conversionReviewVersions: ["v1", "v1beta1"]
      clientConfig:
        caBundle: Cg==
        service:
          namespace: #@ d.service.namespace
          name: #@ d.service.name
          path: /convert
#@ end
