#@ load("@ytt:overlay", "overlay")

#@overlay/match by=overlay.all, expects="1+"
---
#@overlay/match-child-defaults missing_ok=True
metadata:
  labels:
    cluster.x-k8s.io/provider: "cluster-api"
#@overlay/match when=1
spec:
  #@overlay/match when=1
  selector:
    #@overlay/match when=1
    matchLabels:
      #@overlay/match missing_ok=True
      cluster.x-k8s.io/provider: "cluster-api"
  #@overlay/match when=1
  template:
    #@overlay/match when=1
    metadata:
      #@overlay/match when=1
      labels:
        #@overlay/match missing_ok=True
        cluster.x-k8s.io/provider: "cluster-api"
 
#@overlay/match by=overlay.subset({"kind": "Service"}), expects="1+"
---
spec:
  #@overlay/match missing_ok=True
  selector:
    #@overlay/match missing_ok=True
    cluster.x-k8s.io/provider: "cluster-api"

